<h1>Tasks</h1>

<% completed = @tasks.select { |task| !task.completion_date.nil? } %>
<% incomplete = @tasks.select { |task| task.completion_date.nil? } %>

<table id="list">

  <% incomplete.each do |task| %>
    <tr class="task-item incomplete">
      <td>
        <%= link_to task.name, task_path(task.id) %>
      </td>
      <td class="task-action-buttons">
        <%= button_to "mark complete", task_complete_path(task.id), method: :patch %>
        <%= button_to "edit", task_edit_path(task.id), method: :get %>
        <%= button_to "delete", task_delete_path(task.id), method: :delete, data: {confirm: "Are you sure you want to delete this task?"} %>
      </td>
    </tr>
  <% end %>

  <% completed.each do |task| %>
    <tr class="task-item completed">
      <td>
        <%= link_to task.name, task_path(task.id) %>
      </td>
      <td class="task-action-buttons">
        <%= button_to "mark incomplete", task_incomplete_path(task.id), method: :patch %>
        <%= button_to "edit", task_edit_path(task.id), method: :get %>
        <%= button_to "delete", task_delete_path(task.id), method: :delete, data: {confirm: "Are you sure you want to delete this task?"} %>
      </td>
    </tr>
  <% end %>

</table>

<%= button_to "Create a New Task", tasks_new_path, method: :get %>
